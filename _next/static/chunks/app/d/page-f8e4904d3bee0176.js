(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{1099:function(n,e,r){Promise.resolve().then(r.bind(r,14))},14:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return j}});var t=r(8009),o=r(353),c=r(6374),i=r(9914),a=r(1326),l=r(6854);r(6136);var u=r(3260),s=r(7623),d=r(2487);function f(){let n=(0,t._)(["\n  text-align: center;\n  padding: 1rem;\n  padding-top: 5rem;\n\n  img {\n    width: 300px;\n    height: auto;\n    margin: 1rem auto;\n  }\n"]);return f=function(){return n},n}function g(){let n=(0,t._)(["\n  text-align: center;\n  padding: 3rem;\n  padding-top: 25vh;\n\n  img {\n    width: 300px;\n    height: auto;\n    margin: 1rem auto;\n  }\n"]);return g=function(){return n},n}let h=c.Z.div(f()),p=c.Z.div(g());function x(){let n=Array.from((0,i.useSearchParams)().keys())[0],{data:e,error:r,mutate:t,isLoading:c}=(0,d._)("/download-counter/".concat(n),"json"),f=(0,a.useCallback)(async()=>{if(!confirm("다운로드 회수를 차감하고 다운로드를 시작하시겠습니까?"))return;let e=l.Am.info("다운로드 중입니다. 잠시만 기다려주세요.",{autoClose:!1,isLoading:!0});try{let r=await fetch(s.Q+"/download-counter/download/".concat(n),{method:"POST"});if(!r.ok)throw Error("다운로드에 실패했습니다. 관리자에게 문의해주세요.");let{data:t,name:o,format:c}=await r.json(),i=document.createElement("a"),a=new Blob([Uint8Array.from(atob(t),n=>n.charCodeAt(0))],{type:"application/".concat(c)}),u=URL.createObjectURL(a);i.href=u,i.download=o,i.click(),l.Am.update(e,{render:"다운로드가 완료되었습니다. 정상적으로 다운로드 되지 않았다면, 관리자에게 문의해주세요.",isLoading:!1,type:"success",autoClose:5e3})}catch(n){l.Am.update(e,{render:"다운로드에 실패했습니다. 관리자에게 문의해주세요.",isLoading:!1,type:"error"})}finally{t()}},[t,n]);return r?(0,o.jsxs)(h,{children:[(0,o.jsx)("img",{src:"/logo.png",alt:"logo"}),(0,o.jsx)("p",{children:"죄송합니다. 다운로드 링크가 만료되었거나 잘못된 링크입니다."})]}):c?(0,o.jsxs)(p,{children:[(0,o.jsx)(l.Ix,{}),(0,o.jsx)("img",{src:"/logo.png",alt:"logo"}),(0,o.jsx)("p",{children:"데이터를 불러오고 있습니다..."})]}):(0,o.jsxs)(p,{children:[(0,o.jsx)(l.Ix,{}),(0,o.jsx)("img",{src:"/logo.png",alt:"logo"}),(0,o.jsx)("p",{children:"구매해주셔서 감사합니다."}),(0,o.jsx)("p",{children:"아래 버튼을 누르면 다운로드가 진행됩니다."}),(0,o.jsx)("br",{}),(null==e?void 0:e.count)?(0,o.jsxs)("p",{children:["다운로드 유효 기한 : ",new Date((null==e?void 0:e.expireAt)||0).toLocaleString(),(0,o.jsx)("br",{}),"잔여 다운로드 횟수 : ",null==e?void 0:e.count]}):(0,o.jsx)("p",{children:"잔여 다운로드 회수가 모두 소진되었습니다."}),(0,o.jsx)("br",{}),(0,o.jsxs)("p",{children:["다운로드 진행이 되지 않을 경우, 외부 브라우저에서 다시 시도해보시기 바랍니다.",(0,o.jsx)("br",{}),"상품을 잘 받으셨다면 네이버쇼핑에서 ‘구매확정’ 버튼을 눌러주세요."]}),(0,o.jsx)("br",{}),(null==e?void 0:e.count)?(0,o.jsx)(u.z,{onClick:f,children:"다운로드하기"}):null,(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("p",{children:"문제가 발생했을 경우, ‘카카오톡채널’, 혹은 ‘네이버톡톡’으로 문의 바랍니다."})]})}function j(){return(0,o.jsx)(a.Suspense,{children:(0,o.jsx)(x,{})})}},3260:function(n,e,r){"use strict";r.d(e,{z:function(){return c}});var t=r(8009);function o(){let n=(0,t._)(["\n  background-color: ",";\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 0.25rem;\n  cursor: pointer;\n  transition: background-color 0.2s;\n\n  ","\n\n  &:hover {\n    background-color: #c87f88;\n  }\n\n  &:disabled {\n    background-color: #e1e1e1;\n    color: #a1a1a1;\n    cursor: not-allowed;\n  }\n\n  ","\n"]);return o=function(){return n},n}let c=r(6374).Z.button(o(),"#db929b",n=>{let{fullWidth:e}=n;return e&&"width: 100%;"},n=>{let{color:e}=n;return"secondary"===e?"\n            background-color: #f1f1f1;\n            color: #333;\n        ":"danger"===e?"background-color: #f44336;":"warning"===e?"background-color: #ff9800;":void 0})},7623:function(n,e,r){"use strict";r.d(e,{Q:function(){return t}});let t="https://api.haeunserver.com/v1"},2487:function(n,e,r){"use strict";r.d(e,{_:function(){return i}});var t=r(7469),o=r(7623),c=r(2809);let i=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",{getHeader:r}=(0,c.p)();return(0,t.ZP)("".concat(o.Q).concat(n),async n=>{let t=await fetch(n,{headers:r()});if(!t.ok)throw Error("Failed to fetch");return"json"==e?t.json():t.text()})}},2809:function(n,e,r){"use strict";r.d(e,{p:function(){return o}});var t=r(4941);let o=(0,r(4354).U)((n,e)=>({token:t.Z.get("token")||null,getHeader:()=>({Authorization:"Bearer ".concat(e().token)}),setToken:e=>{t.Z.set("token",e,{expires:new Date(Date.now()+72e5)}),n({token:e})},getTokenFromCookie:()=>{n({token:t.Z.get("token")||null})},removeToken:()=>n({token:null})}))}},function(n){n.O(0,[418,35,463,469,254,615,744],function(){return n(n.s=1099)}),_N_E=n.O()}]);