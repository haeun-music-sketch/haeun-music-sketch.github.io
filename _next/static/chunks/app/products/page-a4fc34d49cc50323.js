(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{5040:function(){},9003:function(n,e,t){Promise.resolve().then(t.bind(t,8157))},8157:function(n,e,t){"use strict";t.r(e);var r=t(353),o=t(9914),i=t(2529),c=t(1326),u=t(6854),a=t(3631),l=t(3260),s=t(9621),d=t(7253),f=t(6696),m=t(448),p=t(7623),h=t(2487),g=t(2809);e.default=(0,a.E)("상품 관리",function(){let n=(0,o.useSearchParams)(),e=(0,o.useRouter)(),{getHeader:t}=(0,g.p)(),[a,b]=(0,c.useState)(Number(n.get("page")||0)||0),[j,x]=(0,c.useState)(n.get("keyword")||""),[C,k]=(0,c.useState)(n.get("orderRowName")||"id"),[y,v]=(0,c.useState)(n.get("orderDirection")||"desc"),[z,N]=(0,c.useState)(i.stringify({page:a,keyword:j,orderRowName:C,orderDirection:y})),L=(0,c.useCallback)((t,r)=>{let o=i.stringify({...i.parse(n.toString()),[t]:r});e.push("?"+o),N(o)},[e,n]),w=(0,c.useCallback)(()=>{L("page",String(a+1)),b(a+1)},[a,L]),M=(0,c.useCallback)(()=>{L("page",String(a-1)),b(a-1)},[a,L]),{data:S,mutate:Z}=(0,h._)("/products?"+z);(0,h._)("/products?"+i.stringify({page:a+1,keyword:j,orderRowName:C,orderDirection:y}));let T=(0,c.useCallback)(async()=>{(0,u.Am)("곧 자동으로 서버가 네이버 스마트 스토어로부터 정보를 얻어옵니다.",{type:"success",autoClose:2500});let n=0,e=!0;do{let r=await fetch("".concat(p.Q,"/naver-smart-store-api/fetch-product-list?page=").concat(n),{method:"POST",headers:{"Content-Type":"application/json",...t()}}),{length:o}=await r.json();0===o&&(e=!1),n++,await Z(),await new Promise(n=>{setTimeout(n,5e3)})}while(e)},[t,Z]),_=(0,c.useMemo)(()=>null==S?void 0:S.items.map(n=>async()=>{let e=(0,u.Am)("서버에 상품 정보 업데이트를 요청하고 있어요. (ID: ".concat(n.id,")"),{isLoading:!0,autoClose:!1});if(!(await fetch(p.Q+"/naver-smart-store-api/fetch-product/".concat(n.code),{method:"POST",headers:{"Content-Type":"application/json",...t()}})).ok){u.Am.update(e,{render:"상품 정보 업데이트에 실패했어요.",type:"error",autoClose:5e3,isLoading:!1});return}await Z(),u.Am.update(e,{render:"네이버 스마트 스토어로부터 상품 정보 업데이트에 성공했어요.",type:"success",autoClose:2500,isLoading:!1})}),[null==S?void 0:S.items,t,Z]),A=(0,c.useMemo)(()=>null==S?void 0:S.items.map(n=>async()=>{let e=(0,u.Am)("서버에 상품 삭제를 요청하고 있어요. (ID: ".concat(n.id,")"),{isLoading:!0,autoClose:!1});try{let r=await fetch("".concat(p.Q,"/products/").concat(n.id),{method:"DELETE",headers:{...t()}});if(!r.ok)throw r.body;u.Am.update(e,{render:"상품 삭제에 성공했어요.",type:"success",autoClose:2500,isLoading:!1})}catch(n){u.Am.update(e,{render:"상품 삭제에 실패했어요.",type:"error",autoClose:5e3,isLoading:!1})}await Z()}),[null==S?void 0:S.items,t,Z]),I=(0,c.useCallback)(async()=>{let n=prompt("임시 상품의 이름을 입력해주세요. (취소 버튼을 누르면 취소됩니다.)");if(!n)return;let e=(0,u.Am)("서버에 임시 상품 생성을 요청하고 있어요. (이름: ".concat(n,")"),{isLoading:!0,autoClose:!1});try{let r=await fetch("".concat(p.Q,"/products"),{method:"POST",headers:{"Content-Type":"application/json",...t()},body:JSON.stringify({name:n})});if(!r.ok)throw r.body;u.Am.update(e,{render:"임시 상품 생성에 성공했어요.",type:"success",autoClose:2500,isLoading:!1}),x(n)}catch(n){u.Am.update(e,{render:"임시 상품 생성에 실패했어요.",type:"error",autoClose:5e3,isLoading:!1});return}},[t]);(0,c.useEffect)(()=>{let n=setTimeout(()=>{let n=i.stringify({page:a,keyword:j,orderRowName:C,orderDirection:y});N(n),e.replace("?"+n)},100);return()=>clearTimeout(n)},[j,a,e,C,y]);let P=(0,c.useCallback)(()=>{k("id"),v(n=>"asc"===n?"desc":"asc")},[]),E=(0,c.useCallback)(()=>{k("name"),v(n=>"asc"===n?"desc":"asc")},[]),Q=(0,c.useCallback)(n=>{L("page",String(n)),b(n)},[L]);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(s.X,{children:[(0,r.jsx)(m.M,{type:"text",value:j,onChange:n=>x(n.currentTarget.value),placeholder:"검색어를 입력해주세요"}),(0,r.jsx)(l.z,{onClick:T,children:"새로운 상품 불러오기"})]}),(0,r.jsx)(l.z,{fullWidth:!0,onClick:I,children:"임시 상품 생성"}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(f.X,{header:!0,gridTemplateColumns:"12em 1fr 7em",children:[(0,r.jsxs)("div",{onClick:P,children:["번호"," ","id"===C?"asc"===y?"▲":"▼":null]}),(0,r.jsxs)("div",{onClick:E,children:["이름"," ","name"===C?"asc"===y?"▲":"▼":null]}),(0,r.jsx)("div",{})]}),null==S?void 0:S.items.map((n,e)=>(0,r.jsxs)(f.X,{gridTemplateColumns:"12em 1fr 7em",children:[(0,r.jsx)("div",{className:"id-field",children:(0,r.jsx)("a",{href:"https://smartstore.naver.com/haeun_musicsketch/products/"+n.code,target:"_blank",rel:"noreferrer",children:n.code})}),(0,r.jsx)("div",{children:n.name}),(0,r.jsx)("div",{children:n.code.includes("TEMP")?(0,r.jsx)(l.z,{onClick:null==A?void 0:A[e],children:"삭제"}):(0,r.jsx)(l.z,{onClick:null==_?void 0:_[e],children:"최신화"})})]},n.id))]}),(0,r.jsx)(d.t,{pageSize:(null==S?void 0:S.pageSize)||0,totalCount:(null==S?void 0:S.totalCount)||0,currentIndex:a,toNextPage:w,toPrevPage:M,toPage:Q})]})})},7253:function(n,e,t){"use strict";t.d(e,{t:function(){return s}});var r=t(8009),o=t(353),i=t(6374),c=t(3260),u=t(1326);function a(){let n=(0,r._)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  grid-gap: 1em;\n"]);return a=function(){return n},n}let l=i.Z.div(a()),s=n=>{let{currentIndex:e,toPage:t,pageSize:r,totalCount:i}=n,a=Math.floor(i/r)-1,s=e>0,d=e!==a,f=(0,u.useCallback)(()=>{t(0)},[t]),m=(0,u.useCallback)(()=>{t(a)},[t,a]),p=(0,u.useCallback)(()=>{t(e-1)},[t,e]),h=(0,u.useCallback)(()=>{t(e+1)},[t,e]),g=(0,u.useMemo)(()=>Array.from({length:10},(n,u)=>{let a=10*Math.floor(e/10)+u+1;return a*r>i?null:(0,o.jsx)(c.z,{onClick:()=>t(a-1),color:a-1===e?"primary":"secondary",children:a},a)}),[e,r,i,t]);return(0,o.jsxs)(l,{children:[(0,o.jsx)(c.z,{onClick:f,disabled:!s,color:"secondary",children:"<<"}),(0,o.jsx)(c.z,{onClick:p,disabled:!s,color:"secondary",children:"<"}),g,(0,o.jsx)(c.z,{onClick:h,disabled:!d,color:"secondary",children:">"}),(0,o.jsx)(c.z,{onClick:m,disabled:!d,color:"secondary",children:">>"})]})}},3631:function(n,e,t){"use strict";t.d(e,{E:function(){return A}});var r=t(8009),o=t(353),i=t(6374),c=t(188),u=t(9914),a=t(1326),l=t(6854);let s=n=>"\n  @media (max-width: 768px) {\n    ".concat(n,"\n  }\n");var d=t(7376);t(6136);var f=t(2809);function m(){let n=(0,r._)(["\n  display: grid;\n  grid-template-columns: 200px 1fr;\n\n  ","\n"]);return m=function(){return n},n}function p(){let n=(0,r._)(["\n  padding: 1rem;\n  padding-top: 2rem;\n"]);return p=function(){return n},n}function h(){let n=(0,r._)(["\n  ","\n\n  ","\n"]);return h=function(){return n},n}function g(){let n=(0,r._)(["\n  padding: 3rem 1rem;\n  padding-top: 1rem;\n\n  ","\n"]);return g=function(){return n},n}function b(){let n=(0,r._)(["\n  display: block;\n  padding: 1rem 1.5rem;\n  color: #333;\n  margin: 0.75rem 0;\n\n  &:hover {\n    background-color: #f0f0f0;\n  }\n\n  &:first-of-type {\n    margin-top: 0;\n  }\n\n  ","\n"]);return b=function(){return n},n}function j(){let n=(0,r._)(["\n  padding: 1rem 2rem;\n  padding-top: 0;\n  color: #333;\n  margin: 1rem;\n  border-radius: 10px;\n  border: 1px solid #ddd;\n"]);return j=function(){return n},n}function x(){let n=(0,r._)(["\n  width: 35px;\n  height: 35px;\n  float: right;\n  display: none;\n  cursor: pointer;\n\n  ","\n"]);return x=function(){return n},n}function C(){let n=(0,r._)(["\n  font-size: 2rem;\n  margin: 2rem 0;\n"]);return C=function(){return n},n}function k(){let n=(0,r._)(["\n  width: auto;\n  height: 35px;\n"]);return k=function(){return n},n}let y=i.Z.div(m(),s("\n    grid-template-columns: 1fr;\n  ")),v=i.Z.header(p()),z=i.Z.aside(h(),s("\n    position: fixed;\n    top: 0;\n    right: 0;\n    background-color: rgba(0, 0, 0, 0.3);\n    width: 100%;\n    display: flex;\n    justify-content: flex-end;\n  "),n=>!n.opened&&s("\n      display: none;\n    ")),N=i.Z.nav(g(),s("\n    width: 50vw;\n    padding-top: 5rem;\n    background-color: white;\n    min-height: 100vh;\n  ")),L=(0,i.Z)(c.default)(b(),n=>n.selected&&"\n    color: #db929b;\n    font-weight: bold;\n  "),w=i.Z.main(j()),M=i.Z.img(x(),s("\n    display: block;\n  ")),S=i.Z.h1(C()),Z=i.Z.img(k()),T=[{title:"대시보드",href:"/"},{title:"악보 파일 관리",href:"/music-files/"},{title:"상품 관리",href:"/products/"},{title:"상품-악보 연결",href:"/music-file-by-product-relation/"},{title:"다운로드 링크 관리",href:"/download-links/"},{title:"기타 설정",href:"/configs/"}],_=n=>{let{children:e,title:t}=n,{removeToken:r}=(0,f.p)(),i=(0,u.usePathname)(),[s,d]=(0,a.useState)(!1),m=(0,a.useCallback)(()=>{d(n=>!n)},[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.Ix,{}),(0,o.jsxs)(v,{children:[(0,o.jsx)(c.default,{href:"/",children:(0,o.jsx)(Z,{src:"/logo.png"})}),(0,o.jsx)(M,{src:"data:image/svg+xml;base64,PHN2ZyBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjIiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtMjIgMTYuNzVjMC0uNDE0LS4zMzYtLjc1LS43NS0uNzVoLTE4LjVjLS40MTQgMC0uNzUuMzM2LS43NS43NXMuMzM2Ljc1Ljc1Ljc1aDE4LjVjLjQxNCAwIC43NS0uMzM2Ljc1LS43NXptMC01YzAtLjQxNC0uMzM2LS43NS0uNzUtLjc1aC0xOC41Yy0uNDE0IDAtLjc1LjMzNi0uNzUuNzVzLjMzNi43NS43NS43NWgxOC41Yy40MTQgMCAuNzUtLjMzNi43NS0uNzV6bTAtNWMwLS40MTQtLjMzNi0uNzUtLjc1LS43NWgtMTguNWMtLjQxNCAwLS43NS4zMzYtLjc1Ljc1cy4zMzYuNzUuNzUuNzVoMTguNWMuNDE0IDAgLjc1LS4zMzYuNzUtLjc1eiIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9zdmc+",onClick:m})]}),(0,o.jsxs)(y,{children:[(0,o.jsx)(z,{opened:s,onClick:m,children:(0,o.jsxs)(N,{children:[T.map(n=>(0,o.jsx)(L,{href:n.href,selected:i===n.href,children:n.title},n.title)),(0,o.jsx)(L,{href:"#",onClick:r,children:"로그아웃"})]})}),(0,o.jsxs)(w,{children:[(0,o.jsx)(S,{children:t||"Untitled"}),e]})]})]})};function A(n,e){return function(t){return(0,o.jsx)(a.Suspense,{children:(0,o.jsx)(d.c,{children:(0,o.jsx)(_,{title:n,children:(0,o.jsx)(e,{...t})})})})}}},7376:function(n,e,t){"use strict";t.d(e,{CookieAuthUpdateWrapper:function(){return u},c:function(){return a}});var r=t(353),o=t(9914),i=t(1326),c=t(2809);let u=n=>{let{getTokenFromCookie:e}=(0,c.p)(),t=(0,o.usePathname)();return(0,i.useEffect)(()=>{e()},[t,e]),(0,r.jsx)(r.Fragment,{children:n.children})},a=n=>{let{token:e}=(0,c.p)(),t=(0,o.useRouter)();return(0,i.useEffect)(()=>{e||t.push("/login")},[t,e]),(0,r.jsx)(r.Fragment,{children:n.children})}},3260:function(n,e,t){"use strict";t.d(e,{z:function(){return i}});var r=t(8009);function o(){let n=(0,r._)(["\n  background-color: ",";\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 0.25rem;\n  cursor: pointer;\n  transition: background-color 0.2s;\n\n  ","\n\n  &:hover {\n    background-color: #c87f88;\n  }\n\n  &:disabled {\n    background-color: #e1e1e1;\n    color: #a1a1a1;\n    cursor: not-allowed;\n  }\n\n  ","\n"]);return o=function(){return n},n}let i=t(6374).Z.button(o(),"#db929b",n=>{let{fullWidth:e}=n;return e&&"width: 100%;"},n=>{let{color:e}=n;return"secondary"===e?"\n            background-color: #f1f1f1;\n            color: #333;\n        ":"danger"===e?"background-color: #f44336;":"warning"===e?"background-color: #ff9800;":void 0})},9621:function(n,e,t){"use strict";t.d(e,{X:function(){return i}});var r=t(8009);function o(){let n=(0,r._)(["\n  display: grid;\n  grid-template-columns: 1fr auto;\n\n  > input {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n    height: 2.5rem;\n  }\n\n  > button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    height: 2.5rem;\n  }\n"]);return o=function(){return n},n}let i=t(6374).Z.div(o())},6696:function(n,e,t){"use strict";t.d(e,{X:function(){return i}});var r=t(8009);function o(){let n=(0,r._)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: 3rem 1fr 10rem;\n\n  ","\n\n  grid-gap: 1rem;\n  margin-bottom: 1rem;\n\n  > .buttons {\n    display: flex;\n    gap: 0.5rem;\n  }\n\n  > .id-field {\n    cursor: pointer;\n    color: skyblue;\n  }\n\n  ","\n"]);return o=function(){return n},n}let i=t(6374).Z.div(o(),n=>{let{gridTemplateColumns:e}=n;return e&&"\n          grid-template-columns: ".concat(e,";\n      ")},n=>{let{header:e}=n;return e&&"\n          font-weight: bold;\n          border-bottom: 1px solid #e1e1e1;\n          padding-bottom: 0.5rem;\n      "})},448:function(n,e,t){"use strict";t.d(e,{K:function(){return a},M:function(){return u}});var r=t(8009),o=t(6374);function i(){let n=(0,r._)(["\n  width: 100%;\n  padding: 0.5rem;\n  font-size: 1rem;\n  border: 1px solid #ccc;\n  border-radius: 0.25rem;\n  margin-bottom: 1rem;\n"]);return i=function(){return n},n}function c(){let n=(0,r._)(["\n  width: 100%;\n  padding: 0.5rem;\n  font-size: 1rem;\n  border: 1px solid #ccc;\n  border-radius: 0.25rem;\n  margin-bottom: 1rem;\n  resize: vertical;\n"]);return c=function(){return n},n}let u=o.Z.input(i()),a=o.Z.textarea(c())},7623:function(n,e,t){"use strict";t.d(e,{Q:function(){return r}});let r="https://api.haeunserver.com/v1"},2487:function(n,e,t){"use strict";t.d(e,{_:function(){return c}});var r=t(7469),o=t(7623),i=t(2809);let c=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",{getHeader:t}=(0,i.p)();return(0,r.ZP)("".concat(o.Q).concat(n),async n=>{let r=await fetch(n,{headers:t()});if(!r.ok)throw Error("Failed to fetch");return"json"==e?r.json():r.text()})}},2809:function(n,e,t){"use strict";t.d(e,{p:function(){return o}});var r=t(4941);let o=(0,t(4354).U)((n,e)=>({token:r.Z.get("token")||null,getHeader:()=>({Authorization:"Bearer ".concat(e().token)}),setToken:e=>{r.Z.set("token",e,{expires:new Date(Date.now()+72e5)}),n({token:e})},getTokenFromCookie:()=>{n({token:r.Z.get("token")||null})},removeToken:()=>n({token:null})}))}},function(n){n.O(0,[418,35,346,188,529,254,615,744],function(){return n(n.s=9003)}),_N_E=n.O()}]);